<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-137238428-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-137238428-1');

  // Needed for mobile <pre> tag sizes!
  function getDefaultFontSize(){
   var who=document.createElement('div');
  
   who.style.cssText='white-space: pre-wrap !important; display:inline-block; padding:0; line-height:1; position:absolute; visibility:hidden; font-size:1em';
  
   who.appendChild(document.createTextNode('M'));
   document.body.appendChild(who);
   var fs= [who.offsetWidth, who.offsetHeight];
   document.body.removeChild(who);
   return fs;
  }

  function fixPreSize() {
    // Create our stylesheet to fix small letters for pre tags
    var style = document.createElement('style');
    style.innerHTML =
     'pre {' + // TODO: check what to do with [1]
      //'font-size:' + getDefaultFontSize()[0] + 'px' + 
      'font-size:200%' + 
     '}';
    
    // Get the first script tag
    var ref = document.querySelector('script');
    
    // Insert our new styles before the first script tag
    ref.parentNode.insertBefore(style, ref);
  }

  function myOnLoad() {
    if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
      // If we are on a mobile phone
      fixPreSize();
    }
  }
</script>
<link rel="stylesheet" href="main.css" type="text/css" />
<link rel="stylesheet" href="blog.css" type="text/css" />
<title>Why I like statically typed languages</title>
</head><body onload='myOnLoad()'>
<div id="divbodyholder">
<div class="headerholder"><div class="header">
<div id="title">
<h1 class="nomargin"><a class="ablack" href="http://ballmerpeak.web.elte.hu/devblog">Ballmerpeak devblog</a></h1>
<div id="description">Software development, related stuff and others</div>
</div></div></div>
<div id="divbody"><div class="content">
<!-- entry begin -->
<h3><a class="ablack" href="why-i-like-statically-typed-languages.html">
Why I like statically typed languages
</a></h3>
<div class="subtitle">February 24, 2020  &mdash; 
Richárd Thier</div>
<!-- text begin -->

<p>People usually fall into one of the static vs. dynamic languages fanboy group. 
I always preferred that static languages where types can be determined at the
compile time, but I use languages from both worlds. Now I met the kind of error 
that shines light on why I prefer static languages though. Read on!</p>

<h1>Usual reasons to use static vs. dynamic type systems</h1>

<p>Pro: using a static type system</p>

<ol>
<li>You can catch a lot of errors at compile time</li>
<li>Static languages can be made faster</li>
<li>Static languages constrain bad behaviour</li>
<li>Modern static typed languages can infer types anyways (like the C++11 auto keyword)</li>
</ol>

<p>Pro: using a dynamic type system</p>

<ol>
<li>Most errors one catches by static type systems are simple errors easy to catch anyways.</li>
<li>Usually performance degrades elsewhere anyways</li>
<li>More freedom, not restrictive, less boiletplate.</li>
<li>Why should I tell what type is that number if the computer can infer it anyways?</li>
</ol>

<p>But do we really realize what these mean?</p>

<h1>My personal insight</h1>

<p>The above is well known to most people and it is well visible in flamewars.
What does some of the above mean however and why one really likes this or that 
among the two is not as simple as just listing arguments. The best way to show 
it is through a good example. I have one now.</p>

<p>Lately I am forking "prosopopee" which is originally a static site generator 
aimed towards image galleries and photoblogging. I want to make it into a more 
generic static site generator and use it for my company website. It is python 
and python is dynamically typed - and the bug I has is typical for it!</p>

<pre><code>    Traceback (most recent call last):
      File "/home/prenex/munka/magosit/python/magosit-website/.venv/bin/prosopopee", line 11, in &lt;module&gt;
        load_entry_point('prosopopee==0.8.2', 'console_scripts', 'prosopopee')()
      File "/home/prenex/munka/magosit/python/magosit-website/.venv/lib/python3.8/site-packages/prosopopee/prosopopee.py", line 697, in main
        build_gallery(settings, gallery_settings, gallery_path, templates, galleries_cover=front_page_galleries_cover)
      File "/home/prenex/munka/magosit/python/magosit-website/.venv/lib/python3.8/site-packages/prosopopee/prosopopee.py", line 492, in build_gallery
        galleries_cover = sorted([x for x in galleries_cover if x != {}], key=lambda x: x["ord"] if x["ord"] else (x["date"] if x["date"] else x["link"][0]))
    TypeError: '&lt;' not supported between instances of 'str' and 'datetime.date'
</code></pre>

<p>This happens when I tried to fix "ordering" of links to subpages. They are 
called galleries here because of photoblogging terminology. The original app 
always ordered them according to its <code>date</code> field and because in my case dates 
do not count I just did not give it in. That ended up crashing the app as it 
needed this date always in the lambda.</p>

<p>So I changed the lambda to the following one (seen in the Traceback above):</p>

<pre><code>    key=lambda x: x["ord"] if x["ord"] else (x["date"] if x["date"] else x["link"][0]))
</code></pre>

<p>Practically I added an <code>ord</code> field and some code to just use the always 
existing link name when there is no <code>date</code> given in. The most clear case now 
happens when the user always tells order num using the <code>ord</code> field.</p>

<p>It worked nice, until I got the above exception one day. Why? Oh because I 
just added <code>ord</code> <strong>as user input in the yaml config for my CMS</strong> at some of 
the places, but forgot it at one place where I kept the date. The code thus 
tried to sort the list of all galleries and once it used the <code>ord</code> field for 
the ordering and once it used the <code>date</code> field and surely there is no <strong>&lt;</strong> 
relation between date and string.</p>

<p>Still the whole thing works in most of the cases magically so it is actually 
not so easy to reproduce the error. I had hard time to set it up once again 
to properly reproduce the crash. Also I once got the same crash by making the 
<code>ord</code> field a number and the link field to be character so there were no <strong>&lt;</strong> 
operator between int and str.</p>

<p>Noob error one might say and it is indeed. But the point is that it is not a 
typo or accident. It is a logic error! A "proper" language can catch this, but 
a dynamic typing languge let you do this.</p>

<p>As the data is coming from a yaml file the user is editing no linter can ever 
really warn you for you doing bad things. Also because it works in my case and 
I know how to use it, one feels much less driving force to "do it right".</p>

<p>I think the last sentence is what makes this dangerous. But I think these kind 
or errors are not easy to spot at all. No! Do not dare to say!</p>

<p>Tags: <a href='tag_static.html'>static</a>, <a href='tag_dynamic.html'>dynamic</a>, <a href='tag_type.html'>type</a>, <a href='tag_language.html'>language</a>, <a href='tag_comparison.html'>comparison</a>, <a href='tag_which-is-better.html'>which-is-better</a>, <a href='tag_rant.html'>rant</a>, <a href='tag_reality.html'>reality</a></p>

<!-- text end -->
<!-- entry end -->
</div>
<div id="disqus_thread"></div>
            <img id="disqus-opener" src="discus-logo.jpg">
            <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
               var disqus_shortname = 'ballmerpeak-devblog'; // required: replace example with your forum shortname

            /* * * DONT EDIT BELOW THIS LINE * * */
            var embedfun_disqus = (function() {
            var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
            dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
            (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
            });
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<div id="footer">CC by-nc-nd <a href="https://disqus.com/by/prenex/">Richárd Thier</a> &mdash; <a href="mailto:u9vata&#64;gmail&#46;com">u9vata&#64;gmail&#46;com</a><br/>
Generated with <a href="https://github.com/cfenollosa/bashblog">bashblog</a>, a single bash script to easily create blogs like this one</div>
</div></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'ballmerpeak-devblog'; // required: replace example with your forum shortname

        /* * * DONT EDIT BELOW THIS LINE * * */
        var countfun_disqus = (function () {
        var s = document.createElement("script"); s.async = true;
        s.type = "text/javascript";
        s.src = "//" + disqus_shortname + ".disqus.com/count.js";
        (document.getElementsByTagName("HEAD")[0] || document.getElementsByTagName("BODY")[0]).appendChild(s);
        })
        // This is a custom hackz of mine!!!
        // We only let disqus work if the user really wants it!!!
        // onload is needed as otherwise opener will be null below,
        // we can wait until window load, but need to preserve any earlier!
        var prev_handler = window.onload;
        window.onload = function () {
          if (prev_handler) {
            prev_handler();
          }
          var opener = document.getElementById("disqus-opener");
          opener.onclick = function() {
              opener.onclick = null;
              opener.parentNode.removeChild(opener);
              embedfun_disqus();
              countfun_disqus();
          };
        };
    </script>
</body></html>
